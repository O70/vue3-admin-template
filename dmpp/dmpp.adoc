:toc-title: Data Middle Platform of Personnel
// :toc: left
:toclevels: 4
:source-highlighter: rouge

= {toc-title}

== Important

- [ ] ✨Login
  * [ ] Send verification code
  * [ ] Refactor login method
  * [ ] Mobile authenticate
- [x] Avatar
- [x] Profiles修改
- [x] 修改字段可配置
- [x] 质疑修改(工单)
- [x] 获取百分比
- [x] ✅后台手动百分比计算(AOP暂延)
- [x] ❌ Deprecated: AOP计算百分比，后台无操作
- [x] ❌ Dicts API
- [x] Databases schema name
- [ ] Auditor
- [ ] Security...

- [x] 国籍
- [x] 民族
- [x] 业务类型
- [x] Worker: username
- [x] Org: shortName
- [x] Worker: 百分比统计减册原因如何计算
- [ ] Org: name history patch

- [ ] 数据初始化
  * [ ] Opt: proportion/reset
  * [ ] Topic
  * [ ] 工作经历未找到
- [ ] 项目构建 - Docker(F/B)
- [ ] 测试

- [ ] 下周一第一版测试

=== Data init
  * [x] 基本信息
  * [x] 家庭信息
  * [x] 工作信息
  ** [x] 工作信息
  ** [x] 合同信息  
  * [x] 履历信息 
  ** [x] 教育经历 
  ** [x] 工作经历  
  ** [x] 职务信息  
  ** [x] 职称信息
  * [ ] 党务信息: 模拟许数据： DICT_POLITICAL_FACE_DY | 2020-01-01 | 信息技术中心党支部(ORG_ALL_A42) | DICT_GANG_TITLE_DZBQNWY
  * [ ] 培训经历： 需要加年度查询条件
  * [ ] 科研项目: 数据来源未知
  * [x] 知识产权
  ** [x] 中国专利
  ** [x] 国外专利
  ** [x] 软件著作权
  ** [x] 技术秘密
  ** [x] 论文著作
  ** [x] 技术标准
  * [ ] 奖励信息
  ** [x] 科研奖励
  ** [ ] 党内奖励
  ** [x] 荣誉称号
  * [ ] 学术活动: 无数据来源
  * [x] 自我评定: 无数据来源,对应题目已模拟

== Docs

- [ ] Profiles modify tests: `/supplier/profiles/changer`
- [ ] Get poportion tests: `/supplier/profiles/proportion`
- [ ] Reset poportion tests: `/supplier/profiles/proportion/reset`
- [ ] Profiles cheats
    * [ ] Get all cheats: `/supplier/profiles/cheats/init`
    * [ ] Update cheats
    * [ ] Init cheats: `/supplier/profiles/cheats/init`


== APIS

- [ ] Dict / Org findByCodes and unique api
- [x] Supplier profiles
- [x] ❌ Deprecated: Optimize profiles api performance
- [x] Profile completion percentage
- [x] Find Dict by codes

Adapter

== Tasks

- [ ] List / Page List query conditions(pagation)
- [ ] Fix method `org.thraex.toolkit.model.AbstractTree#toTree`
- [ ] **modules** refactored into microservices: modular / entity /service / repository
- [x] remove `thraex.supplier.mock-prefix`
- [ ] Optimization `@EnableGeneric` annotations, add `boolean genericRouterFunction() default true;` / `boolean enableWebFluxSecurity() default false;`
- [ ] Optimization `EnableGenericSecurity`: move to `@EnableGeneric`
- [x] Refactor databases table name
- [ ] Refactor **Tests**, change MySQL to H2. Optimization performance
- [ ] Optimization security / token
- [ ] Remove `Avatar`
- [ ] `JpaEntity` change to `Auditable`
- [ ] `AuditorAware` -> `ReactiveAuditorAware`
- [ ] Foreign key for `@OneToMany`
- [ ] `CompletableFuture`
- [ ] Move `DmppImplicitNamingStrategy` to Generic
- [ ] Optimization WebFluxSecurityConfiguration

## Questions

- FamilyServiceImpl: // TODO: Question...
- Empty to null ? throw exception
- (if else) to (? :)
- Blank line

## Configuration

.main application-local.yml
[,yaml]
----
spring:
  jackson:
    default-property-inclusion: always
  datasource:
    url: jdbc:mysql://localhost:3307/dmpp_pedestal?useSSL=false&characterEncoding=utf-8&serverTimezone=Asia/Shanghai
    password: hanzo
  jpa:
#    hibernate:
#      ddl-auto: create
    show-sql: true

logging:
  level:
    org.thraex: trace

thraex:
  security:
    token:
      exp: 720
#thraex:
#  security:
#    permitted:
#      - /docs/**
#      - /**
minio:
  url: http://localhost:9000
  access-key: root
  secret-key: minio-admin
  bucket: dev
  web-url: ${minio.url}/${minio.bucket}/
----

.test application-local.yml
[,yaml]
----
spring:
  jackson:
    default-property-inclusion: always
  datasource:
    url: jdbc:mysql://localhost:3307/dmpp_pedestal_docs?useSSL=false&characterEncoding=utf-8&serverTimezone=Asia/Shanghai
    password: hanzo

debug: true

minio:
  url: http://localhost:9000
  access-key: root
  secret-key: minio-admin
  bucket: dev
  web-url: ${minio.url}/${minio.bucket}/
----
